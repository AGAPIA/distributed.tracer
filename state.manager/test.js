var a = require("./state.manager.js");
var trace = "EAApADEzODliNTMxOGVlYWYyZGEyMjY2MWE3NzhjMjZiOTk1ZGVkNDk2YTEAsABPAC9kYXRhL2Rpc3RyaWJ1dGVkLnRyYWNlci90cmFjZXIubm9kZS81OTNlYTBmMGQ2NjA4NzVkZjlkZjM5MWMvUGFyc2VyUGF5bG9hZC5zbwC7AAgAyHIAAAYAAAC7AAgAZHIAAAYAAAC7AAgAwmoAAAcAAACwABQAL3Vzci9sb2NhbC9iaW4vbm9kZQC7AAgA4H4+AAEAAACwACEAL2xpYi9pMzg2LWxpbnV4LWdudS9saWJjLTIuMjMuc28AuwAIAIANBwADAAAAuwAIAKH5EQACAAAAuwAIAIcNBwAHAAAAuwAIAKINBwAFAAAAuwAIALYNBwADAAAAuwAIACAOBwADAAAAuwAIAC8OBwACAAAAuwAIADwOBwADAAAAuwAIAEDvBgAFAAAAuwAIAKX5EQACAAAAuwAIAEnvBgAFAAAAuwAIAF/vBgAMAAAAuwAIAIbvBgAEAAAAuwAIAJbvBgAIAAAAuwAIAPHvBgADAAAAuwAIAPzvBgAHAAAAuwAIAH/wBgAnAAAAuwAIAETxBgADAAAAuwAIAFDxBgAEAAAAuwAIAF/xBgACAAAAuwAIAGvxBgADAAAAuwAIAHjxBgACAAAAuwAIAIHxBgAFAAAAuwAIAJTxBgACAAAAuwAIAKDxBgAEAAAAuwAIACjyBgAEAAAAuwAIANDyBgAEAAAAuwAIAN7yBgAEAAAAuwAIALXxBgAEAAAAuwAIAFPyBgAEAAAAuwAIABbxBgAMAAAAuwAIAETxBgADAAAAuwAIAFDxBgAEAAAAuwAIAF/xBgACAAAAuwAIAGvxBgADAAAAuwAIAHjxBgACAAAAuwAIAPjyBgACAAAAuwAIAIHxBgAFAAAAuwAIAJTxBgACAAAAuwAIAKDxBgAEAAAAuwAIACjyBgAEAAAAuwAIADbyBgAHAAAAuwAIAFPyBgAEAAAAuwAIABbxBgAMAAAAuwAIAETxBgADAAAAuwAIANnzBgACAAAAuwAIAOfzBgAKAAAAuwAIAAn0BgACAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAAn0BgACAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAE/0BgADAAAAuwAIAED0BgADAAAAuwAIAPj0BgAFAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAAn0BgACAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAE/0BgADAAAAuwAIAED0BgADAAAAuwAIAPj0BgAFAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAAn0BgACAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIAB/0BgADAAAAuwAIACr0BgAHAAAAuwAIAAX0BgACAAAAuwAIAAn0BgACAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAIABD0BgADAAAAuwAIABv0BgACAAAAuwAI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";

var buf = Buffer.from(trace, 'base64');

setTimeout(() => {
    var coll;
    console.log("Start");
    a.AcquireLocalCollection("umum").then((c) => {
        console.log("AcquiredLocalCollection");
        coll = a.GetCollections(c);
        //throw "Hands in the air!";
        return a.AddTrace(coll, buf);
    }).then((r) => {
        console.log("AddTrace");
        return a.FlushBB(coll);
    }).then(() => {
        console.log("FlushBB");
        return a.ReleaseLocalCollection(coll.name);
    }).then(() => {
        console.log("ReleaseLocalCollection");
        return a.GenerateNewGlobal("umum");
    }).then(() => {
        console.log("New global collection!");
        console.log("Done");
    });
}, 1000);